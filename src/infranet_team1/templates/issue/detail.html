{% extends "base.html" %}

{% block title %}이슈 상세 - {{ issue.title }}{% endblock %}

{% block content %}
<div class="container">
    <h1>이슈 상세 정보</h1>

    <div>
        <strong>제목:</strong> {{ issue.title }}
    </div>
    <div>
        <strong>내용:</strong> {{ issue.description }}
    </div>
    <div>
        <strong>진행상태:</strong> {{ issue.status }}
    </div>
    <div>
        <strong>고객사:</strong> {{ issue.client_company_name_display }}
    </div>
    <div>
        <strong>작성자:</strong> {{ issue.reported_by_str }}
    </div>
    <div>
        <strong>담당자:</strong> {{ issue.assigned_to_str }}
    </div>
    <div>
        <strong>작성일:</strong> {{ issue.created_at_str }}
    </div>
    <div>
        <strong>최종 수정일:</strong> {{ issue.updated_at_str }}
    </div>

    {# 상태 변경 폼 (예시) #}
    <form action="{{ url_for('issue.update_status', family_name=current_family, issue_id=issue.mongo_id) }}" method="post" style="margin-top: 20px;">
        <label for="new_status">상태 변경:</label>
        <select name="new_status" id="new_status">
            <option value="신규" {% if issue.status == '신규' %}selected{% endif %}>신규</option>
            <option value="진행중" {% if issue.status == '진행중' %}selected{% endif %}>진행중</option>
            <option value="해결됨" {% if issue.status == '해결됨' %}selected{% endif %}>해결됨</option>
        </select>
        <button type="submit">상태 업데이트</button>
    </form>

    <div style="margin-top: 20px;">
        {# 목록으로 돌아가기 링크에 family_name 파라미터 추가 #}
        <a href="{{ url_for('issue.show_list', family_name=current_family) }}">목록으로 돌아가기</a>
    </div>
</div>
{% endblock %}
