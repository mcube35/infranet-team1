{% extends "base.html" %}

{% block title %}íœ´ê°€ ì‹ ì²­ ëª©ë¡{% endblock %}

{% block content %}

<!-- í”Œë˜ì‹œ ë©”ì‹œì§€ í‘œì‹œ ì˜ì—­ (ì„±ê³µ, ì˜¤ë¥˜ ë“±) -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
    {% for category, message in messages %}
    <div class="alert-{{ category }}">{{ message }}</div>
    {% endfor %}
    <script>
      // ê°„ë‹¨í•œ alertìœ¼ë¡œë„ í‘œì‹œ ê°€ëŠ¥
    {% for category, message in messages %}
        // alert("{{ message }}");
    {% endfor %}
    </script>
{% endif %}
{% endwith %}

<h1>ğŸ“‘ íœ´ê°€ ì‹ ì²­ ëª©ë¡</h1>

<!-- ë‚¨ì€ ì—°ì°¨ í‘œì‹œ -->
<div style="padding: 10px; border: 1px solid #ddd; margin-bottom: 20px;">
    <strong>{{ current_user.name }}</strong>ë‹˜ì˜ ì—°ì°¨ í˜„í™©: 
    <strong><span style="color: blue;">{{ remaining_days }}</span> / {{ total_leave_days }}</strong> ì¼ ë‚¨ìŒ
</div>

<p>
    <a href="{{ url_for('vacation.apply_form') }}">
        <button type="button">â• íœ´ê°€ ì‹ ì²­í•˜ê¸°</button>
    </a>
</p>

<table border="1">
<thead>
    <tr>
    <th>No.</th>
    <th>ì¢…ë¥˜</th>
    <th>ê¸°ê°„</th>
    <th>ìƒíƒœ</th>
    <th>ê´€ë¦¬</th>
</tr>
</thead>
<tbody>
    {% for vacation in vacations %}
    <tr>
    <td>{{ loop.revindex }}</td>
    <td>{{ vacation.vacation_type }}</td>
    <td>{{ vacation.start_date }} ~ {{ vacation.end_date }}</td>
    <td>{{ vacation.status }}</td>
    <td>
        {% if vacation.status == 'ëŒ€ê¸°' %}
        <a href="{{ url_for('vacation.edit_form', vacation_id=vacation._id) }}">âœï¸ ìˆ˜ì •</a>
        |
        <!-- ì‚­ì œëŠ” ì´ì œ formìœ¼ë¡œ POST ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤ -->
        <form action="{{ url_for('vacation.delete_vacation', vacation_id=vacation._id) }}" method="post" style="display:inline;">
            <input type="submit" value="ğŸ—‘ ì‚­ì œ" 
                onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');"
                style="background:none; border:none; padding:0; cursor:pointer; color:red; text-decoration:underline;">
        </form>
        {% else %}
        -
        {% endif %}
    </td>
</tr>
    {% else %}
    <tr>
        <td colspan="5">í‘œì‹œí•  íœ´ê°€ ì‹ ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
    </tr>
    {% endfor %}
</tbody>
</table>
{% endblock %}