{% extends "base.html" %}

{% block title %}íœ´ê°€ ê´€ë¦¬ (ê´€ë¦¬ì){% endblock %}

{% block content %}

<!-- í”Œë˜ì‹œ ë©”ì‹œì§€ë¥¼ ë°›ì•„ JavaScript alertìœ¼ë¡œ ë„ìš°ëŠ” ë¶€ë¶„ -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <script>
      {% for message in messages %}
        alert("{{ message }}");
      {% endfor %}
    </script>
  {% endif %}
{% endwith %}

<h1>ğŸ›  íœ´ê°€ ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡ (ê´€ë¦¬ììš©)</h1>

<table border="1" cellpadding="5" cellspacing="0">
    <thead>
        <tr>
            <th>No</th>
            <th>ì‹ ì²­ì</th>
            <th>íœ´ê°€ ì¢…ë¥˜</th>
            <th>ê¸°ê°„</th>
            <th>ì‚¬ìœ </th>
            <th>ì‹ ì²­ì¼</th>
            <th>ìƒíƒœ</th>
            <th>ê´€ë¦¬</th>
        </tr>
    </thead>
    <tbody>
        {% if vacations %}
            {% for vacation in vacations %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>
                    {% if vacation.user_info and vacation.user_info|length > 0 %}
                        {{ vacation.user_info[0].name }}
                    {% else %}
                        (ì•Œ ìˆ˜ ì—†ëŠ” ì‚¬ìš©ì)
                    {% endif %}
                </td>
                <td>{{ vacation.vacation_type }}</td>
                <td>{{ vacation.start_date }} ~ {{ vacation.end_date }}</td>
                <td>{{ vacation.reason }}</td>
                <td>{{ vacation.created_at.strftime('%Y-%m-%d %H:%M') if vacation.created_at else '-' }}</td>
                <td>{{ vacation.status }}</td>
                <td>
                    <form action="{{ url_for('vacation_admin.approve_vacation', vacation_id=vacation._id) }}" method="post" style="display: inline;">
                        <input type="submit" value="âœ… ìŠ¹ì¸" 
                            onclick="return confirm('ì´ íœ´ê°€ ì‹ ì²­ì„ ìŠ¹ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');"
                            style="background: none; border: none; padding: 0; cursor: pointer;">
                    </form>
                    |
                    <form action="{{ url_for('vacation_admin.reject_vacation', vacation_id=vacation._id) }}" method="post" style="display: inline;">
                        <input type="submit" value="âŒ ê±°ì ˆ" 
                            onclick="return confirm('ì´ íœ´ê°€ ì‹ ì²­ì„ ê±°ì ˆí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');"
                            style="background: none; border: none; padding: 0; cursor: pointer;">
                    </form>
                </td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="8">ìŠ¹ì¸ ëŒ€ê¸° ì¤‘ì¸ íœ´ê°€ ì‹ ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
            </tr>
        {% endif %}
    </tbody>
</table>

{% endblock %}