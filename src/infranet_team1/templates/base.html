<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>{% block title %}Team Infranet{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

<div class="main-sheet">
    
    <!-- 1. ì•± í—¤ë” -->
    <header class="app-header">
        
        <!-- ì™¼ìª½: ë¡œê³  -->
        <div class="header-section header-left">
            <a href="/" class="logo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 12L4 4L12 4L12 12L4 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 12L12 20H20V12H12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 12L12 20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span>Team Infranet</span>
            </a>
        </div>

        <!-- ê°€ìš´ë°: ë©”ì¸ ë‚´ë¹„ê²Œì´ì…˜ -->
        <nav class="header-section header-center">
            
            <div class="menu-item">
                <a href="#">ì»¤ë®¤ë‹ˆí‹°</a>
                <div class="dropdown-menu">
                    <a href="{{ url_for('write.home') }}">ê²Œì‹œíŒ</a>
                    <a href="{{ url_for('write.home') }}">ê²Œì‹œë¬¼ ìš”ì•½</a>
                </div>
            </div>
            
            <div class="menu-item">
                <a href="#">ì´ìŠˆ ê´€ë¦¬</a>
                <div class="dropdown-menu">
                    <a href="{{ url_for('issue.home') }}">ì´ìŠˆ ì¡°íšŒ ë° ê´€ë¦¬</a>
                    <a href="#">ì´ìŠˆ í†µê³„</a>
                </div>
            </div>

            <div class="menu-item">
                <a href="#">ì—…ë¬´ ê´€ë¦¬</a>
                <div class="dropdown-menu">
                    <a href="{{ url_for('task.home') }}">ì—…ë¬´ ì¡°íšŒ ë° ê´€ë¦¬</a>
                    <a href="{{ url_for('task.stat') }}">ì—…ë¬´ í†µê³„</a>
                </div>
            </div>

            <div class="menu-item">
                <a href="#">ê³ ê°ì‚¬ ê´€ë¦¬</a>
                <div class="dropdown-menu">
                    <a href="{{ url_for('client.show_list') }}">ê³ ê°ì‚¬ ì¡°íšŒ ë° ê´€ë¦¬</a>
                </div>
            </div>

            <div class="menu-item">
                <a href="#">ì¸ì‚¬ ê´€ë¦¬</a>
                <div class="dropdown-menu">
                    <a href="{{ url_for('att.show_list') }}">ë‚´ ê·¼íƒœê´€ë¦¬</a>
                    <a href="{{ url_for('vacation.show_list') }}">ë‚´ íœ´ê°€ ì‹ ì²­ / ì¡°íšŒ</a>
                    {% if current_user.role in ['admin', 'system'] %}
                        <hr>
                        <a href="{{ url_for('emp_admin.employee_list') }}">ğŸ”’ ì§ì› ì •ë³´ ê´€ë¦¬</a>
                        <a href="{{ url_for('vacation_admin.admin_list') }}">ğŸ”’ íœ´ê°€ ì‹ ì²­ ê´€ë¦¬</a>
                        <a href="{{ url_for('hr_stats.dashboard') }}">ğŸ”’ ì¸ì‚¬ í†µê³„ ë³´ê¸°</a>
                    {% endif %}
                </div>
            </div>
        </nav>

        <!-- ì˜¤ë¥¸ìª½: ì‚¬ìš©ì ì •ë³´ ë° ì•¡ì…˜ -->
        <div class="header-section header-right">
            {% if current_user.is_authenticated %}
                <div class="user-box">
                    <img src="{{ url_for('file_download', file_id=current_user.profile_image_id) if current_user.profile_image_id else url_for('static', filename='img/user_icon.png') }}" alt="í”„ë¡œí•„ ì‚¬ì§„" class="avatar" />
                    <div class="user-info-dropdown">
                        <strong>{{ current_user.name }}</strong>
                        <span>{{ current_user.email }}</span>
                        <hr>
                        <span>ê¶Œí•œ: {{ current_user.role }}</span>
                        <hr>
                        <form action="{{ url_for('auth.logout') }}" method="post">
                            <button type="submit" class="button-logout">ë¡œê·¸ì•„ì›ƒ</button>
                        </form>
                    </div>
                </div>
            {% else %}
                <a href="{{ url_for('auth.login_get') }}" class="button-primary">Login</a>
            {% endif %}
        </div>
    </header>

    <!-- 2. ë©”ì¸ ì½˜í…ì¸ ê°€ ì‚½ì…ë  ì˜ì—­ -->
    <main class="content-body">
        {% block content %}{% endblock %}
    </main>
</div>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <script>
        {% for message in messages %}
            if (!"{{ message }}".startsWith('saved_')) {
            alert("{{ message }}");
            }
        {% endfor %}
        </script>
    {% endif %}
    {% endwith %}

</body>
</html>