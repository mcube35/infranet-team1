{% extends "base.html" %}

{% block title %}고객사 목록{% endblock %}

{% block content %}
<h1>고객사 목록</h1>

<form method="get" action="{{ url_for('client.show_list') }}">
  <input type="text" name="search" placeholder="고객사명 또는 부서 검색" value="{{ search }}">
  <button type="submit">검색</button>
  {% if search %}
    <a href="{{ url_for('client.show_list') }}">초기화</a>
  {% endif %}
</form>

{% if clients %}
<table border="1">
  <thead>
    <tr>
      <th>고객사명</th>
      <th>부서</th>
      <th>계약 상태</th>
      <th>계약 시작일</th>
      <th>계약 종료일</th>
      <th>상세</th>
    </tr>
  </thead>
  <tbody>
    {% for c in clients %}
    <tr>
      <td>{{ c.company_name }}</td>
      <td>{{ c.department }}</td>
      <td>{{ c.contract.status }}</td>
      <td>{{ c.contract.start_date }}</td>
      <td>{{ c.contract.end_date }}</td>
      <td><a href="{{ url_for('client.detail', id=c._id) }}">보기</a></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
  <p>고객사 정보가 없습니다.</p>
{% endif %}
{% endblock %}